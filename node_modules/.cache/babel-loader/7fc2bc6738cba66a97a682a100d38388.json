{"ast":null,"code":"import _slicedToArray from\"C:/Users/USER/Desktop/PickingPacking/PickingPacking/PickingPacking-Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect,useRef}from'react';import{Link,useHistory}from'react-router-dom';import styled from'styled-components';import{checkAccessRights,get}from'../../global/Services';import Header from'./Header';import NewPicking from'./content/NewPicking';import Loading from'../../global/Loading';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Picking=function Picking(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),accessrights=_useState2[0],setAccessrights=_useState2[1];var history=useRef();history.current=useHistory();useEffect(function(){checkAccessRights().then(function(access){if(access){if(access.includes('Modules | Picking')){setAccessrights(access);}else{history.current.push('/menu');}}else{history.current.push('/login');}});},[]);var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),pickcart=_useState4[0],setPickcart=_useState4[1];var _useState5=useState([false,'','']),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var pickcartbarcodeInput;var clickPickcartbarcode=function clickPickcartbarcode(e){e.preventDefault();setLoading([true,'Retrieving data from server...','spinner']);get(\"picking/pickcart/\".concat(pickcartbarcodeInput,\"/\")).then(function(data){if(data){switch(data.status){case'AVAILABLE':break;case'PICKING IN PROGRESS'://ask for active picking session\n//redirect to the picking session\nbreak;default:setLoading([true,\"Invalid Status: \".concat(data.status),'error']);setTimeout(function(){setLoading([false,'','']);pickcartbarcodeInput='';document.getElementById('pickcartbarcode').value='';setPickcart(false);},2000);}}else{setLoading([true,'! SERVER ERROR !','error']);setTimeout(function(){setLoading([false,'','']);pickcartbarcodeInput='';document.getElementById('pickcartbarcode').value='';setPickcart(false);},1000);}});};return/*#__PURE__*/_jsxs(_Fragment,{children:[loading[0]&&/*#__PURE__*/_jsx(Loading,{message:loading[1],symbol:loading[2]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),!pickcart&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{margin:'0.2em'},htmlFor:\"pickcartbarcode\",children:\"SCAN or Enter PickCart Barcode\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{style:{margin:'0.2em'},type:\"text\",name:\"pickcartbarcode\",id:\"pickcartbarcode\",onChange:function onChange(e){pickcartbarcodeInput=e.target.value;}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{style:{margin:'0.2em'},onClick:clickPickcartbarcode,children:\"Continue...\"})]}),pickcart&&{}]})]});};export default Picking;","map":{"version":3,"sources":["C:/Users/USER/Desktop/PickingPacking/PickingPacking/PickingPacking-Frontend/src/modules/picking/Picking.js"],"names":["useState","useEffect","useRef","Link","useHistory","styled","checkAccessRights","get","Header","NewPicking","Loading","Picking","accessrights","setAccessrights","history","current","then","access","includes","push","pickcart","setPickcart","loading","setLoading","pickcartbarcodeInput","clickPickcartbarcode","e","preventDefault","data","status","setTimeout","document","getElementById","value","margin","target"],"mappings":"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","sourcesContent":["import { useState, useEffect, useRef } from 'react'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nimport { checkAccessRights, get } from '../../global/Services'\r\nimport Header from './Header'\r\nimport NewPicking from './content/NewPicking'\r\nimport Loading from '../../global/Loading'\r\n\r\nconst Picking = () => {\r\n    const [accessrights, setAccessrights] = useState([]);\r\n    const history = useRef();\r\n    history.current = useHistory();\r\n\r\n    useEffect(() => {\r\n        checkAccessRights().then(access => {\r\n            if(access) {\r\n                if(access.includes('Modules | Picking')){\r\n                    setAccessrights(access);\r\n                }else{\r\n                    history.current.push('/menu');\r\n                }\r\n            }else{\r\n                history.current.push('/login');\r\n            }\r\n        })}, [])\r\n\r\n    const [pickcart, setPickcart] = useState(false)\r\n    const [loading, setLoading] = useState([false, '', ''])\r\n\r\n    let pickcartbarcodeInput;\r\n    const clickPickcartbarcode = (e) => {\r\n        e.preventDefault();\r\n        setLoading([true, 'Retrieving data from server...', 'spinner']);\r\n        get(`picking/pickcart/${pickcartbarcodeInput}/`).then( data => {\r\n            if(data){\r\n                switch(data.status) {\r\n                    case 'AVAILABLE':\r\n                        \r\n                        break;\r\n                    case 'PICKING IN PROGRESS':\r\n                        //ask for active picking session\r\n                        //redirect to the picking session\r\n                        break;\r\n                    default:\r\n                        setLoading([true, `Invalid Status: ${data.status}`, 'error']);\r\n                        setTimeout(() => {\r\n                            setLoading([false, '', '']);\r\n                            pickcartbarcodeInput = '';\r\n                            document.getElementById('pickcartbarcode').value = '';\r\n                            setPickcart(false);\r\n                        }, 2000)\r\n                  }\r\n            }else{\r\n                setLoading([true, '! SERVER ERROR !', 'error']);\r\n                setTimeout(() => {\r\n                    setLoading([false, '', '']);\r\n                    pickcartbarcodeInput = '';\r\n                    document.getElementById('pickcartbarcode').value = '';\r\n                    setPickcart(false);\r\n                }, 1000)\r\n            }\r\n        })\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {loading[0] && <Loading message={loading[1]} symbol={loading[2]}/>}\r\n            <div>\r\n                <Header/>\r\n                {!pickcart && <div>\r\n                    <label style={{margin: '0.2em'}} htmlFor='pickcartbarcode'>SCAN or Enter PickCart Barcode</label><br/>\r\n                    <input style={{margin: '0.2em'}}  type='text' name='pickcartbarcode' id='pickcartbarcode' onChange={e => {pickcartbarcodeInput = e.target.value}}/><br/>\r\n                    <button style={{margin: '0.2em'}}  onClick={clickPickcartbarcode}>Continue...</button>\r\n                </div>}\r\n                {pickcart && {}}\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Picking"]},"metadata":{},"sourceType":"module"}