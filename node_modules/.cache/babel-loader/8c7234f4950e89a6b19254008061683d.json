{"ast":null,"code":"import _slicedToArray from\"C:/Users/emreesendir/Documents/projects/wms-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"C:/Users/emreesendir/Documents/projects/wms-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import{useState,useEffect,useRef}from'react';import{useHistory}from'react-router-dom';import styled from'styled-components';import{checkAccessRights,login}from'./Services';import Loading from'./Loading';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Div=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    height: 100%;\\n    display: flex;\\n    justify-content: top;\\n    align-items: center;\\n    flex-direction: column;\\n\\n    div{\\n        margin-top: 10%;\\n    }\\n\\n    form {\\n        width: 20em;\\n        border-style: solid;\\n        border-width: 0.1em;\\n        padding: 2em 1em 3em 1em;\\n    }\\n\\n    .input {\\n        display: flex;\\n        margin: 0.5em 2em 0.5em 2em;\\n\\n        input {\\n            margin-left: auto;\\n            width: 12em;\\n        }\\n    }\\n\\n    #loginButon {\\n        margin-top: 1em;\\n        width: 6em;\\n        height: 3em;\\n    }\\n\"])));var Login=function Login(){var history=useRef();history.current=useHistory();useEffect(function(){return checkAccessRights().then(function(access){return access&&history.current.push('/menu');});},[]);var _useState=useState([false,'','']),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var username;var password;var Login=function Login(e){e.preventDefault();setLoading([true,'Logging in...','spinner']);login(e,username,password).then(function(isSucceed){if(isSucceed){setLoading([true,'Login successful.','done']);setTimeout(function(){setLoading([false,'','']);},2000);history.current.push('/menu');}else{setLoading([true,'Failed to login!','error']);setTimeout(function(){setLoading([false,'','']);},2000);}}).catch(function(err){console.error(err);setLoading([true,'Failed to login!','error']);setTimeout(function(){setLoading([false,'','']);},2000);});//clean the form\nvar pass=document.getElementById('password');var usr=document.getElementById('username');pass.value='';usr.value='';username='';password='';};return/*#__PURE__*/_jsxs(_Fragment,{children:[loading[0]&&/*#__PURE__*/_jsx(Loading,{message:loading[1],symbol:loading[2]}),/*#__PURE__*/_jsx(Div,{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{style:{textAlign:'center',margin:5},children:[/*#__PURE__*/_jsx(\"legend\",{children:\"LeeGroup GmbH\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Warehouse Management System\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"input\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{id:\"username\",type:\"text\",onChange:function onChange(e){return username=e.target.value;}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",type:\"password\",onChange:function onChange(e){return password=e.target.value;}})]}),/*#__PURE__*/_jsx(\"input\",{id:\"loginButon\",type:\"submit\",value:\"Login\",onClick:Login})]})})})]});};export default Login;","map":{"version":3,"sources":["C:/Users/emreesendir/Documents/projects/wms-frontend/src/global/Login.js"],"names":["useState","useEffect","useRef","useHistory","styled","checkAccessRights","login","Loading","Div","div","Login","history","current","then","access","push","loading","setLoading","username","password","e","preventDefault","isSucceed","setTimeout","catch","err","console","error","pass","document","getElementById","usr","value","textAlign","margin","target"],"mappings":"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","sourcesContent":["import { useState, useEffect, useRef } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nimport { checkAccessRights, login } from './Services'\r\nimport Loading from './Loading'\r\n\r\nconst Div = styled.div`\r\n    height: 100%;\r\n    display: flex;\r\n    justify-content: top;\r\n    align-items: center;\r\n    flex-direction: column;\r\n\r\n    div{\r\n        margin-top: 10%;\r\n    }\r\n\r\n    form {\r\n        width: 20em;\r\n        border-style: solid;\r\n        border-width: 0.1em;\r\n        padding: 2em 1em 3em 1em;\r\n    }\r\n\r\n    .input {\r\n        display: flex;\r\n        margin: 0.5em 2em 0.5em 2em;\r\n\r\n        input {\r\n            margin-left: auto;\r\n            width: 12em;\r\n        }\r\n    }\r\n\r\n    #loginButon {\r\n        margin-top: 1em;\r\n        width: 6em;\r\n        height: 3em;\r\n    }\r\n`;\r\n\r\nconst Login = () => {\r\n    const history = useRef();\r\n    history.current = useHistory();\r\n\r\n    useEffect(() => checkAccessRights().then(access => access && history.current.push('/menu')), [])\r\n\r\n    const [loading, setLoading] = useState([false, '', ''])\r\n\r\n    let username;\r\n    let password;\r\n\r\n    const Login = (e) => {\r\n        e.preventDefault();\r\n        setLoading([true, 'Logging in...', 'spinner']);\r\n\r\n        login(e, username, password)\r\n            .then(isSucceed => {\r\n                if(isSucceed) {\r\n                    setLoading([true, 'Login successful.', 'done']);\r\n                    setTimeout(() => {\r\n                        setLoading([false, '', '']);\r\n                    }, 2000);\r\n                    history.current.push('/menu');\r\n                }else{\r\n                    setLoading([true, 'Failed to login!', 'error']);\r\n                    setTimeout(() => {\r\n                        setLoading([false, '', '']);\r\n                    }, 2000);\r\n                }\r\n            })\r\n            .catch(err => {\r\n                console.error(err);\r\n                setLoading([true, 'Failed to login!', 'error']);\r\n                setTimeout(() => {\r\n                    setLoading([false, '', '']);\r\n                }, 2000);\r\n            });\r\n\r\n        //clean the form\r\n        const pass = document.getElementById('password');\r\n        const usr = document.getElementById('username');\r\n        pass.value = '';\r\n        usr.value = '';\r\n        username = '';\r\n        password = '';\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {loading[0] && <Loading message={loading[1]} symbol={loading[2]}/>}\r\n            <Div>\r\n                <div>\r\n                    <form style={{textAlign: 'center', margin: 5}}>\r\n                        <legend>LeeGroup GmbH</legend>\r\n                        <p>Warehouse Management System</p>\r\n                        <hr/>\r\n                        <div className='input'>\r\n                            <label>Username</label>\r\n                            <input id='username' type='text' onChange={e => username = e.target.value}/>\r\n                        </div>\r\n                        <div className='input'>\r\n                            <label>Password</label>\r\n                            <input id='password' type='password' onChange={e => password = e.target.value}/>\r\n                        </div>\r\n                        <input id='loginButon' type='submit' value='Login' onClick={Login}/>\r\n                    </form>\r\n                </div>\r\n            </Div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Login"]},"metadata":{},"sourceType":"module"}