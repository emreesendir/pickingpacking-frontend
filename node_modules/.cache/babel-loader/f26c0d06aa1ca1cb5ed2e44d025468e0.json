{"ast":null,"code":"import _objectSpread from\"C:/Users/USER/Desktop/PickingPacking/PickingPacking/PickingPacking-Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/USER/Desktop/PickingPacking/PickingPacking/PickingPacking-Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"C:/Users/USER/Desktop/PickingPacking/PickingPacking/PickingPacking-Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8;import styled from'styled-components';import{useState,useEffect}from'react';import{get,patch,dlete}from'../../../../global/Services';import{MdDelete,MdEdit,MdSave,MdCancel}from'react-icons/md';import Loading from'../../../../global/Loading';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Background=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n\\n    position: absolute;\\n    top: 0;\\n    background-color: black;\\n    opacity: 0.2;\\n    height: 100%;\\n    width: 100%;\\n    z-index: 2;\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n    align-items: center;\\n\\n\"])));var Div=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n\\n    position: absolute;\\n    z-index: 3;\\n    height: 50%;\\n    width: 50%;\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n    align-items: center;\\n\\n\"])));var Cancel=styled.button(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n\\n    margin-left: auto;\\n    margin-bottom: 0.5em;\\n    cursor: pointer;\\n\\n\"])));var DetailDiv=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n\\n    border-style: solid;\\n    height: 100%;\\n    width: 100%;\\n    background-color: #f0f0f0;\\n    color: black;\\n    text-align: left;\\n\\n    form{\\n        margin-left: 2em;\\n        width: 90%;\\n        height: 40%;\\n    }\\n\\n    fieldset{\\n        height: 98%;\\n    }\\n\\n\"])));var Permissions=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n\\n    height: 90%;\\n    overflow-x: auto;\\n    display: grid;\\n    grid-template-rows: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;\\n    grid-auto-flow: column;\\n\\n\"])));var Header=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n\\n    margin-left: 2em;\\n    width: 90%;\\n    display: flex;\\n    align-items: center;\\n\\n    div{\\n        margin-left: auto;\\n        margin-right: 0.5em;\\n        font-size: 110%;\\n    }\\n\\n\"])));var ConfirmBackground=styled.div(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n    \\n    position: absolute;\\n    z-index: 5;\\n    height: 100%;\\n    width: 100%;\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n    align-items: center;\\n    background-color: black;\\n    opacity: 0.2;\\n    top: 0;\\n\"])));var Confirm=styled.div(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n    \\n    position: absolute;\\n    z-index: 6;\\n    height: 20%;\\n    width: 20%;\\n    background-color: #f0f0f0;\\n    border-style: solid;\\n\"])));var UserDetail=function UserDetail(_ref){var userId=_ref.userId,setStatus=_ref.setStatus;var _useState=useState([false,'','']),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),DATA=_useState4[0],setDATA=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),editMode=_useState6[0],setEditMode=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),confirm=_useState8[0],setConfirm=_useState8[1];var getData=function getData(){get(\"management/users/\".concat(userId,\"/\")).then(function(data){data.allpermissions.sort();setDATA(data);});};useEffect(getData,[userId,editMode]);var permissonChange=function permissonChange(e){var data=DATA;if(data.userpermissions.includes(e.target.value)){data.userpermissions.splice(data.userpermissions.indexOf(e.target.value),1);}else{data.userpermissions.push(e.target.value);}setDATA(_objectSpread({},data));};var clickSave=function clickSave(){setLoading([true,'Sending data to server...','spinner']);patch('management/users/',{'id':userId,'permissions':DATA.userpermissions}).then(function(res){if(res){setLoading([true,'Successfull.','done']);setTimeout(function(){setLoading([false,'','']);setEditMode(false);},1000);}else{setLoading([true,'! SERVER ERROR !','error']);setTimeout(function(){setLoading([false,'','']);setEditMode(false);},1000);}});};var clickCancel=function clickCancel(){setEditMode(false);};var clickEdit=function clickEdit(){setEditMode(true);};var dlt=function dlt(){setLoading([true,'Sending data to server...','spinner']);dlete(\"management/users/\".concat(userId,\"/\")).then(function(res){if(res){setLoading([true,'Successfull.','done']);setTimeout(function(){setLoading([false,'','']);setStatus(false);},1000);}else{setLoading([true,'! SERVER ERROR !','error']);setTimeout(function(){setLoading([false,'','']);setStatus(false);},1000);}});};var clickDelete=function clickDelete(){setConfirm(true);};return/*#__PURE__*/_jsxs(_Fragment,{children:[confirm&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ConfirmBackground,{}),/*#__PURE__*/_jsx(Confirm,{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Are you sure?\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){setConfirm(false);dlt();},children:\"Delete\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){setConfirm(false);},children:\"Cancel\"})]})})]}),loading[0]&&/*#__PURE__*/_jsx(Loading,{message:loading[1],symbol:loading[2]}),/*#__PURE__*/_jsx(Background,{}),/*#__PURE__*/_jsxs(Div,{children:[/*#__PURE__*/_jsx(Cancel,{onClick:function onClick(){return setStatus(false);},children:\"X\"}),DATA&&/*#__PURE__*/_jsxs(DetailDiv,{children:[/*#__PURE__*/_jsxs(Header,{children:[/*#__PURE__*/_jsx(\"h1\",{children:DATA.username}),/*#__PURE__*/_jsxs(\"div\",{children:[editMode&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MdSave,{style:{margin:'0.5em',cursor:'pointer'},onClick:clickSave}),/*#__PURE__*/_jsx(MdCancel,{style:{margin:'0.5em',marginRight:'0',cursor:'pointer'},onClick:clickCancel})]}),!editMode&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MdEdit,{style:{margin:'0.5em',cursor:'pointer'},onClick:clickEdit}),/*#__PURE__*/_jsx(MdDelete,{style:{margin:'0.5em',marginRight:'0',cursor:'pointer'},onClick:clickDelete})]})]})]}),/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsxs(\"fieldset\",{disabled:!editMode,children:[/*#__PURE__*/_jsx(\"legend\",{children:\"Permissions\"}),/*#__PURE__*/_jsx(Permissions,{children:DATA.allpermissions.map(function(permission){if(DATA.userpermissions.includes(permission)){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{onChange:permissonChange,type:\"checkbox\",id:permission,name:permission,value:permission,checked:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:permission,children:permission})]});}else{return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{onChange:permissonChange,type:\"checkbox\",id:permission,name:permission,value:permission}),/*#__PURE__*/_jsx(\"label\",{htmlFor:permission,children:permission})]});}})})]})})]})]})]});};export default UserDetail;","map":{"version":3,"sources":["C:/Users/USER/Desktop/PickingPacking/PickingPacking/PickingPacking-Frontend/src/modules/manage/content/components/UserDetail.js"],"names":["styled","useState","useEffect","get","patch","dlete","MdDelete","MdEdit","MdSave","MdCancel","Loading","Background","div","Div","Cancel","button","DetailDiv","Permissions","Header","ConfirmBackground","Confirm","UserDetail","userId","setStatus","loading","setLoading","DATA","setDATA","editMode","setEditMode","confirm","setConfirm","getData","then","data","allpermissions","sort","permissonChange","e","userpermissions","includes","target","value","splice","indexOf","push","clickSave","res","setTimeout","clickCancel","clickEdit","dlt","clickDelete","username","margin","cursor","marginRight","map","permission"],"mappings":"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","sourcesContent":["import styled from 'styled-components'\r\nimport { useState, useEffect } from 'react'\r\nimport { get, patch, dlete } from '../../../../global/Services'\r\nimport { MdDelete, MdEdit, MdSave, MdCancel  } from 'react-icons/md'\r\nimport Loading from '../../../../global/Loading'\r\n\r\nconst Background = styled.div`\r\n\r\n    position: absolute;\r\n    top: 0;\r\n    background-color: black;\r\n    opacity: 0.2;\r\n    height: 100%;\r\n    width: 100%;\r\n    z-index: 2;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n\r\n`;\r\n\r\nconst Div = styled.div`\r\n\r\n    position: absolute;\r\n    z-index: 3;\r\n    height: 50%;\r\n    width: 50%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n\r\n`;\r\n\r\nconst Cancel = styled.button`\r\n\r\n    margin-left: auto;\r\n    margin-bottom: 0.5em;\r\n    cursor: pointer;\r\n\r\n`;\r\n\r\nconst DetailDiv = styled.div`\r\n\r\n    border-style: solid;\r\n    height: 100%;\r\n    width: 100%;\r\n    background-color: #f0f0f0;\r\n    color: black;\r\n    text-align: left;\r\n\r\n    form{\r\n        margin-left: 2em;\r\n        width: 90%;\r\n        height: 40%;\r\n    }\r\n\r\n    fieldset{\r\n        height: 98%;\r\n    }\r\n\r\n`;\r\n\r\nconst Permissions = styled.div`\r\n\r\n    height: 90%;\r\n    overflow-x: auto;\r\n    display: grid;\r\n    grid-template-rows: 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;\r\n    grid-auto-flow: column;\r\n\r\n`;\r\n\r\nconst Header = styled.div`\r\n\r\n    margin-left: 2em;\r\n    width: 90%;\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    div{\r\n        margin-left: auto;\r\n        margin-right: 0.5em;\r\n        font-size: 110%;\r\n    }\r\n\r\n`;\r\n\r\nconst ConfirmBackground = styled.div`\r\n    \r\n    position: absolute;\r\n    z-index: 5;\r\n    height: 100%;\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    background-color: black;\r\n    opacity: 0.2;\r\n    top: 0;\r\n`;\r\n\r\nconst Confirm = styled.div`\r\n    \r\n    position: absolute;\r\n    z-index: 6;\r\n    height: 20%;\r\n    width: 20%;\r\n    background-color: #f0f0f0;\r\n    border-style: solid;\r\n`;\r\n\r\nconst UserDetail = ( { userId, setStatus } ) => {\r\n\r\n    const [loading, setLoading] = useState([false, '', ''])\r\n    const [DATA, setDATA] = useState(false)\r\n    const [editMode, setEditMode] = useState(false)\r\n    const [confirm, setConfirm] = useState(false)\r\n\r\n    const getData = () => {\r\n        get(`management/users/${userId}/`).then(data => {\r\n            data.allpermissions.sort();\r\n            setDATA(data)\r\n        })\r\n    }\r\n\r\n    useEffect(getData, [userId, editMode])\r\n\r\n    const permissonChange = (e) => {\r\n        let data = DATA;\r\n        if(data.userpermissions.includes(e.target.value)){\r\n            data.userpermissions.splice(data.userpermissions.indexOf(e.target.value), 1);\r\n        }else{\r\n            data.userpermissions.push(e.target.value)\r\n        }\r\n        setDATA({...data});\r\n    }\r\n\r\n    const clickSave = () => {\r\n        setLoading([true, 'Sending data to server...', 'spinner']);\r\n\r\n        patch('management/users/', {'id': userId, 'permissions': DATA.userpermissions}).then(res => {\r\n            if(res){\r\n                setLoading([true, 'Successfull.', 'done']);\r\n                setTimeout(() => {\r\n                    setLoading([false, '', '']);\r\n                    setEditMode(false);\r\n                }, 1000)\r\n            }else{\r\n                setLoading([true, '! SERVER ERROR !', 'error']);\r\n                setTimeout(() => {\r\n                    setLoading([false, '', '']);\r\n                    setEditMode(false);\r\n                }, 1000)\r\n            }\r\n        })\r\n    }\r\n\r\n    const clickCancel = () => {\r\n        setEditMode(false);\r\n    }\r\n\r\n    const clickEdit = () => {\r\n        setEditMode(true)\r\n    }\r\n\r\n    const dlt = () => {\r\n        setLoading([true, 'Sending data to server...', 'spinner']);\r\n\r\n        dlete(`management/users/${userId}/`).then(res => {\r\n            if(res){\r\n                setLoading([true, 'Successfull.', 'done']);\r\n                setTimeout(() => {\r\n                    setLoading([false, '', '']);\r\n                    setStatus(false);\r\n                }, 1000)\r\n            }else{\r\n                setLoading([true, '! SERVER ERROR !', 'error']);\r\n                setTimeout(() => {\r\n                    setLoading([false, '', '']);\r\n                    setStatus(false);\r\n                }, 1000)\r\n            }\r\n        })\r\n    }\r\n\r\n    const clickDelete = () => {\r\n        setConfirm(true)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {confirm && \r\n                <>\r\n                    <ConfirmBackground/>\r\n                    <Confirm>\r\n                        <div>\r\n                            <p>Are you sure?</p>\r\n                            <button onClick={() => {setConfirm(false); dlt();}}>Delete</button>\r\n                            <button onClick={() => {setConfirm(false);}}>Cancel</button>\r\n                        </div>\r\n                    </Confirm>\r\n                </>}\r\n            {loading[0] && <Loading message={loading[1]} symbol={loading[2]}/>}\r\n            <Background/>\r\n            <Div>\r\n                <Cancel onClick={() => setStatus(false)}>X</Cancel>\r\n                {DATA && <DetailDiv>\r\n                    <Header>\r\n                        <h1>{DATA.username}</h1>\r\n                        <div>\r\n                            {editMode && <>\r\n                                <MdSave style={{margin: '0.5em', cursor: 'pointer'}} onClick={clickSave}/>\r\n                                <MdCancel style={{margin: '0.5em', marginRight: '0', cursor: 'pointer'}} onClick={clickCancel}/>\r\n                            </>}\r\n                            {!editMode && <>\r\n                                <MdEdit style={{margin: '0.5em', cursor: 'pointer'}} onClick={clickEdit}/>\r\n                                <MdDelete style={{margin: '0.5em', marginRight: '0', cursor: 'pointer'}} onClick={clickDelete}/>\r\n                            </>}\r\n                        </div>\r\n                    </Header>\r\n                    <form>\r\n                        <fieldset disabled={!editMode}>\r\n                            <legend>Permissions</legend>\r\n                            <Permissions>\r\n                                {DATA.allpermissions.map(permission => {\r\n                                    if(DATA.userpermissions.includes(permission)){\r\n                                        return(\r\n                                            <div>\r\n                                                <input onChange={permissonChange} type=\"checkbox\" id={permission} name={permission} value={permission} checked/>\r\n                                                <label htmlFor={permission}>{permission}</label>\r\n                                            </div>\r\n                                        )\r\n                                    }else{\r\n                                        return(\r\n                                            <div>\r\n                                                <input onChange={permissonChange} type=\"checkbox\" id={permission} name={permission} value={permission}/>\r\n                                                <label htmlFor={permission}>{permission}</label>\r\n                                            </div>\r\n                                        )\r\n                                    }\r\n                                })}\r\n                            </Permissions>\r\n                        </fieldset>\r\n                    </form>\r\n                </DetailDiv>}\r\n            </Div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default UserDetail"]},"metadata":{},"sourceType":"module"}